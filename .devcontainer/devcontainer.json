{
  // 1. Image: Switched to the latest stable Python image with common utilities
  "name": "ANAMIKASTAR Python Development Environment",
  "image": "mcr.microsoft.com/devcontainers/python:3-bookworm",
  
  // 2. Features: Added MySQL/MariaDB client and Node.js (common for web frontends)
  "features": {
    "ghcr.io/devcontainers/features/node:1": {
      "version": "lts"
    },
    "ghcr.io/devcontainers/features/mysql-client:1": {}
  },

  // 3. Post Creation Command: Installs your dependencies and cleans up
  "postCreateCommand": "pip install --no-cache-dir -r requirements.txt",

  // 4. Port Forwarding: Standard ports for web dev and services
  "forwardPorts": [5000, 8000, 8080, 3306],

  "customizations": {
    "vscode": {
      // 5. Extensions: Cleaned out CS50 tools, added professional Python/Web tools
      "extensions": [
        // Python Essentials
        "ms-python.python",
        "ms-python.vscode-pylance",
        "ms-toolsai.jupyter",
        
        // Professional Formatting (Black) & Linting (Flake8)
        "ms-python.flake8",
        "ms-python.black-formatter",

        // Web, Data, and Utility
        "ms-azuretools.vscode-docker",
        "inferrinizzard.prettier-sql-vscode",
        "redhat.vscode-yaml",
        "eamodio.gitlens"
      ],
      "settings": {
        // --- Core VS Code Settings ---
        "workbench.startupEditor": "none",
        "explorer.compactFolders": false,
        "editor.mouseWheelZoom": true,
        "files.autoSave": "afterDelay",
        "files.autoSaveDelay": 1000,
        "terminal.integrated.defaultProfile.linux": "bash",
        "terminal.integrated.gpuAcceleration": "off",

        // --- Python Formatting and Linting Settings ---
        // Sets Black as the default formatter (Professional Standard)
        "[python]": {
          "editor.defaultFormatter": "ms-python.black-formatter",
          "editor.formatOnSave": true
        },
        "python.formatting.provider": "none", // Disable autopep8 from CS50
        "python.linting.enabled": true,
        "python.linting.pylintEnabled": false,
        "python.linting.flake8Enabled": true,
        "flake8.args": [
          "--max-line-length=88", // Matches Black's line length
          "--ignore=E203,E501,W503" // Common ignores
        ],
        
        // --- Remote/Codespaces Settings ---
        "remote.autoForwardPorts": true,
        "remote.autoForwardPortsSource": "process",
        "remote.portsAttributes": {
          "5000": { "label": "Flask/Web App", "onAutoForward": "notify" },
          "8000": { "label": "Django/Web App", "onAutoForward": "notify" },
          "3306": { "label": "MySQL", "onAutoForward": "ignore" }
        },

        // Clean up and re-enabling helpful features
        "editor.formatOnSave": true,
        "editor.hover.enabled": true,
        "editor.folding": true,
        "editor.matchBrackets": "always",
        "editor.quickSuggestions": {
          "comments": "on",
          "other": "on",
          "strings": "on"
        }
      }
    }
  }
}
